jQuery(function(h){({init:function(){this.cacheVariables(),this.countDownTimerMoment(),this.evntLoaders()},cacheVariables:function(){this.$timer=h("#dpn-zvc-timer"),this.changeMeetingState=h(".vczapi-meeting-state-change")},evntLoaders:function(){h(window).on("load",this.setTimezone.bind(this)),h(this.changeMeetingState).on("click",this.meetingStateChange.bind(this))},countDownTimerMoment:function(){var t,e,a,n,i,d,o,r,s,m,c,g,u,l,v=this.$timer;0<v.length&&(t=v.data("date"),e=v.data("tz"),a=v.data("state"),"Asia/Katmandu"===(n=moment.tz.guess())&&(n="Asia/Kathmandu"),i=moment.tz(t,e).format(),d=moment.tz(i,n).format("MMM D, YYYY HH:mm:ss"),o=moment.tz(i,n).format(),r=moment().unix(),s=moment(o).unix()-r,m=document.documentElement.lang,c=""!==zvc_strings.date_format?zvc_strings.date_format:"LLLL",h(".sidebar-start-time").html(moment.parseZone(o).locale(m).format(c)),g=36e5,"ended"===a?h(v).html("<div class='dpn-zvc-meeting-ended'><h3>"+zvc_strings.meeting_ended+"</h3></div>"):0<s?(u=new Date(d).getTime(),l=setInterval(function(){var t=(new Date).getTime(),e=u-t;document.getElementById("dpn-zvc-timer-days").innerText=Math.floor(e/864e5),document.getElementById("dpn-zvc-timer-hours").innerText=Math.floor(e%864e5/g),document.getElementById("dpn-zvc-timer-minutes").innerText=Math.floor(e%g/6e4),document.getElementById("dpn-zvc-timer-seconds").innerText=Math.floor(e%6e4/1e3),e<0&&(clearInterval(l),h(v).html("<div class='dpn-zvc-meeting-ended'><h3>"+zvc_strings.meeting_starting+"</h3></div>"))},1e3)):h(v).html("<div class='dpn-zvc-meeting-ended'><h3>"+zvc_strings.meeting_started+"</h3></div>"))},setTimezone:function(){var t,e,a=moment.tz.guess();"Asia/Katmandu"===a&&(a="Asia/Kathmandu");try{"single-meeting"===mtg_data.page&&(h(".dpn-zvc-sidebar-content").after('<div class="dpn-zvc-sidebar-box remove-sidebar-loder-text"><p>Loading..Please wait..</p></div>'),t={action:"set_timezone",user_timezone:a,post_id:mtg_data.post_id,mtg_timezone:mtg_data.timezone,start_date:mtg_data.start_date,type:"page"},h.post(mtg_data.ajaxurl,t).done(function(t){t.success?h(".dpn-zvc-sidebar-content").after(t.data):h(".dpn-zvc-sidebar-content").after('<div class="dpn-zvc-sidebar-box">'+t.data+"</div>"),h(".remove-sidebar-loder-text").remove()})),"shortcode"===mtg_data.type&&(e={action:"set_timezone",user_timezone:a,mtg_timezone:mtg_data.timezone,join_uri:mtg_data.join_uri,browser_url:mtg_data.browser_url,start_date:mtg_data.start_date,type:"shortcode"},h(".zvc-table-shortcode-duration").after('<tr class="remove-shortcode-loder-text"><td colspan="2">Loading.. Please wait..</td></tr>'),h.post(mtg_data.ajaxurl,e).done(function(t){t.success?h(".zvc-table-shortcode-duration").after(t.data):h(".zvc-table-shortcode-duration").after('<tr><td colspan="2">'+t.data+"</td></tr>"),h(".remove-shortcode-loder-text").remove()}))}catch(t){}},meetingStateChange:function(t){t.preventDefault();var e=h(t.currentTarget).data("state"),a=h(t.currentTarget).data("postid"),n={id:h(t.currentTarget).data("id"),state:e,type:h(t.currentTarget).data("type"),post_id:a||!1,action:"state_change",accss:vczapi_state.zvc_security};if("resume"===e)this.changeState(n);else if("end"===e){if(!confirm(vczapi_state.lang.confirm_end))return;this.changeState(n)}},changeState:function(t){h.post(vczapi_state.ajaxurl,t).done(function(t){location.reload()})}}).init()});